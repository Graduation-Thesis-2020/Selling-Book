<div class="contain-custom">
  <div>
    <a style="font-weight: 500; color:black" routerLink="/admin/statistics"><i class="fas fa-angle-double-left" ></i> Thống kê</a>
  </div>
  <div style="margin-right: 50px; margin-left: 50px">
    <h1 style="padding-top: 1 0px">Thống kê khách hàng</h1>
    <div class="ser-t">
      <b></b>
      <span><i></i></span>
      <b class="line"></b>
    </div>
  </div>
  <div class="cart-row">
    <div class="date-search">

      <div class="input-group "  style="width: 450px">
        <select #id class="custom-select" id="inputGroupSelect02" (change)="selected(id.value)" >
          <option selected value="All">Tất cả</option>
          <option value="01-2021">Tháng 01/2021</option>
          <option value="02-2021">Tháng 02/2021</option>
          <option value="03-2021">Tháng 03/2021</option>
          <option value="04-2021">Tháng 04/2021</option>
          <option value="05-2021">Tháng 05/2021</option>
          <option value="06-2021">Tháng 06/2021</option>
          <option value="07-2021">Tháng 07/2021</option>
          <option value="08-2021">Tháng 08/2021</option>
          <option value="09-2021">Tháng 09/2021</option>
          <option value="10-2021">Tháng 10/2021</option>
          <option value="11-2021">Tháng 11/2021</option>
          <option value="12-2021">Tháng 12/2021</option>
        </select>

      </div>
    </div>
  </div>

  <div class="row" style="margin-bottom: 20px;">
    <div class="col-sm-4" *ngIf="all">
      <div class="cart-item">
        <div class="row">
          <div class="col-4">
            <div div class="icon-item">
              <i class="fas fa-user-check"></i>
            </div>

          </div>
          <div class="col-8" >
            <div class="data-item">
              <p class="p1">{{statAllUser.length}}</p>
              <p class="p2">Khách hàng</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-4" *ngIf="!all && messNumError==null">
      <div class="cart-item" style="background-color: cornflowerblue;">
        <div class="row">
          <div class="col-4">
            <div div class="icon-item">
              <i class="fas fa-user-plus"></i>
            </div>

          </div>
          <div class="col-8" >
            <div class="data-item">
              <p class="p1">{{num}}</p>
              <p class="p2">Khách hàng mới</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div style="text-align: center;" *ngIf="messStatError">
    <span>Chưa có dữ liệu thống kê!</span>
  </div>
  <div class="row" *ngIf="!messStatError">
    <div class="col-sm-6 ">
       <!-- PieChart -->
      <div style="display: block;" class="item-chart" *ngIf="pieChartData">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 5 khách hàng chi tiêu nhiều nhất</div>
        <canvas baseChart [data]="pieChartData" [labels]="pieChartLabels" [chartType]="pieChartType"
          [options]="pieChartOptions" [plugins]="pieChartPlugins" [legend]="pieChartLegend">
        </canvas>
      </div>
      <!-- <div style="display: block;" class="item-chart" *ngIf="pieChartData1">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 3 khách hàng chi tiêu nhiều nhất</div>
        <canvas baseChart [data]="pieChartData1" [labels]="pieChartLabels1" [chartType]="pieChartType"
          [options]="pieChartOptions" [plugins]="pieChartPlugins" [legend]="pieChartLegend">
        </canvas>
      </div> -->
    </div>

    <div class="col-sm-6 ">
      <div style="display: block;" class="item-chart">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 5 khách hàng chi tiêu nhiều nhất</div>

        <div class="top5">
          <!-- top1 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-crown text-warning"></i>
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="!statAllUser[0].imageUrl">
              <img src="https://www.freeiconspng.com/uploads/customers-icon-3.png" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="statAllUser[0].imageUrl">
              <img src="{{statAllUser[0].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name">{{statAllUser[0].fullname}}</p>
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name1">{{statAllUser[0].phone}}</p>
            </div>
            <div class="col-sm-3  mt-2">
              <p class="name1">{{statAllUser[0].totalPrice}} đồng</p>
            </div>
          </div>

          <!-- top2 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-medal" style="color: rgb(177, 171, 169);"></i>
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="!statAllUser[1].imageUrl">
              <img src="https://www.freeiconspng.com/uploads/customers-icon-3.png" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="statAllUser[1].imageUrl">
              <img src="{{statAllUser[1].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name">{{statAllUser[1].fullname}}</p>
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name1">{{statAllUser[1].phone}}</p>
            </div>
            <div class="col-sm-3  mt-2">
              <p class="name1">{{statAllUser[1].totalPrice}} đồng</p>
            </div>
          </div>

          <!-- top3 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-medal" style="color: rgb(245, 101, 49);"></i>
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="!statAllUser[2].imageUrl">
              <img src="https://www.freeiconspng.com/uploads/customers-icon-3.png" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="statAllUser[2].imageUrl">
              <img src="{{statAllUser[2].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name">{{statAllUser[2].fullname}}</p>
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name1">{{statAllUser[2].phone}}</p>
            </div>
            <div class="col-sm-3  mt-2">
              <p class="name1">{{statAllUser[2].totalPrice}} đồng</p>
            </div>
          </div>

          <!-- top4 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              #4
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="!statAllUser[3].imageUrl">
              <img src="https://www.freeiconspng.com/uploads/customers-icon-3.png" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="statAllUser[3].imageUrl">
              <img src="{{statAllUser[3].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name">{{statAllUser[3].fullname}}</p>
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name1">{{statAllUser[3].phone}}</p>
            </div>
            <div class="col-sm-3  mt-2">
              <p class="name1">{{statAllUser[3].totalPrice}} đồng</p>
            </div>
          </div>

          <!-- top5 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              #5
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="!statAllUser[4].imageUrl">
              <img src="https://www.freeiconspng.com/uploads/customers-icon-3.png" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-1 img-reponsive" *ngIf="statAllUser[4].imageUrl">
              <img src="{{statAllUser[4].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name">{{statAllUser[4].fullname}}</p>
            </div>
            <div class="col-sm-3 mt-2">
              <p class="name1">{{statAllUser[4].phone}}</p>
            </div>
            <div class="col-sm-3  mt-2">
              <p class="name1">{{statAllUser[4].totalPrice}} đồng</p>
            </div>
          </div>


        </div>
      </div>

    </div>
  </div>

  <div style="margin-top: 30px; margin-bottom: 20px" *ngIf="!messStatError">
    <table
      class="table table-bordered table-striped table-hover table-responsive-lg"
    >
      <thead style="background-color: rgb(148, 202, 219)">
        <tr>
          <th>No.</th>
          <th>Tên Khách</th>
          <th>Email</th>
          <th>Số điện thoại</th>
          <th>Tổng chi tiêu(đồng)</th>
        </tr>
      </thead>
      <tbody >
        <tr *ngFor="let cus of statAllUser | paginate: config; let i = index">
          <td>{{ i + 1 }}</td>
          <td class="text-info font-weight-bold">{{ cus.fullname }}</td>
          <td>{{ cus.email }}</td>
          <td>
            {{ cus.phone }}
          </td>
          <td>{{ cus.totalPrice }}</td>

        </tr>
      </tbody>

    </table>
    <pagination-controls
      style="text-align: center"
      (pageChange)="pageChanged($event)" *ngIf="statAllUser.length>15"
    ></pagination-controls>
  </div>

  </div>
