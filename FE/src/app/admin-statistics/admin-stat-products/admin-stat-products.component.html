<div class="contain-custom">
  <div>
    <a style="font-weight: 500; color:black" routerLink="/admin/statistics"><i class="fas fa-angle-double-left" ></i> Thống kê</a>
  </div>
  <div style="margin-right: 50px; margin-left: 50px">
    <h1 style="padding-top: 1 0px">Thống kê sản phẩm</h1>
    <div class="ser-t">
      <b></b>
      <span><i></i></span>
      <b class="line"></b>
    </div>
  </div>
  <div class="cart-row">
    <div class="date-search">

      <div class="input-group "  style="width: 450px">
        <select #id class="custom-select" id="inputGroupSelect02" (change)="selected(id.value)" >
          <option selected value="All">Tất cả</option>
          <option value="01-2021">Tháng 01/2021</option>
          <option value="02-2021">Tháng 02/2021</option>
          <option value="03-2021">Tháng 03/2021</option>
          <option value="04-2021">Tháng 04/2021</option>
          <option value="05-2021">Tháng 05/2021</option>
          <option value="06-2021">Tháng 06/2021</option>
          <option value="07-2021">Tháng 07/2021</option>
          <option value="08-2021">Tháng 08/2021</option>
          <option value="09-2021">Tháng 09/2021</option>
          <option value="10-2021">Tháng 10/2021</option>
          <option value="11-2021">Tháng 11/2021</option>
          <option value="12-2021">Tháng 12/2021</option>
        </select>

      </div>
    </div>
  </div>

  <div class="row" style="margin-bottom: 20px;">
    <div class="col-sm-4" *ngIf="all">
      <div class="cart-item">
        <div class="row">
          <div class="col-4">
            <div div class="icon-item">
              <i class="fas fa-book"></i>
            </div>

          </div>
          <div class="col-8" >
            <div class="data-item">
              <p class="p1">{{books?.length}}</p>
              <p class="p2">Sản phẩm</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-4" *ngIf="!messStatError">
      <div class="cart-item" style="background-color: cornflowerblue;">
        <div class="row">
          <div class="col-4">
            <div div class="icon-item">
              <i class="fas fa-book-open"></i>
            </div>

          </div>
          <div class="col-8" >
            <div class="data-item">
              <p class="p1">{{statAllProduct?.length}}</p>
              <p class="p2">Sản phẩm bán được</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div style="text-align: center;" *ngIf="messStatError">
    <span>Chưa có dữ liệu thống kê!</span>
  </div>
  <div class="row" *ngIf="!messStatError">
    <div class="col-sm-6 ">
       <!-- PieChart -->
      <div style="display: block;" class="item-chart" *ngIf="pieChartData">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 5 sách bán được nhiều nhất</div>
        <canvas baseChart [data]="pieChartData" [labels]="pieChartLabels" [chartType]="pieChartType"
          [options]="pieChartOptions" [plugins]="pieChartPlugins" [legend]="pieChartLegend">
        </canvas>
      </div>
      <!-- <div style="display: block;" class="item-chart" *ngIf="pieChartData1">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 3 khách hàng chi tiêu nhiều nhất</div>
        <canvas baseChart [data]="pieChartData1" [labels]="pieChartLabels1" [chartType]="pieChartType"
          [options]="pieChartOptions" [plugins]="pieChartPlugins" [legend]="pieChartLegend">
        </canvas>
      </div> -->
    </div>

    <div class="col-sm-6 ">
      <div style="display: block;" class="item-chart">
        <div style="text-align: center; padding-top: 10px; font-weight: 500; font-size: 20px">Top 5 sách bán được nhiều nhất</div>

        <div class="top5">
          <!-- top1 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-crown text-warning"></i>
            </div>

            <div class="col-sm-1 img-reponsive">
              <img src="{{statAllProduct[0].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-7 mt-2">
              <p class="name">{{statAllProduct[0].title}}</p>
            </div>
            <div class="col-sm-1 mt-2">
              <p class="name1">{{statAllProduct[0].Quantity}}</p>
            </div>

          </div>

          <!-- top2 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-medal" style="color: rgb(177, 171, 169);"></i>
            </div>

            <div class="col-sm-1 img-reponsive">
              <img src="{{statAllProduct[1].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-7 mt-2">
              <p class="name">{{statAllProduct[1].title}}</p>
            </div>
            <div class="col-sm-1 mt-2">
              <p class="name1">{{statAllProduct[1].Quantity}}</p>
            </div>

          </div>

          <!-- top3 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              <i class="fas fa-medal" style="color: rgb(224, 94, 50);"></i>
            </div>

            <div class="col-sm-1 img-reponsive">
              <img src="{{statAllProduct[2].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-7 mt-2">
              <p class="name">{{statAllProduct[2].title}}</p>
            </div>
            <div class="col-sm-1 mt-2">
              <p class="name1">{{statAllProduct[2].Quantity}}</p>
            </div>

          </div>

          <!-- top4 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              #4
            </div>

            <div class="col-sm-1 img-reponsive">
              <img src="{{statAllProduct[3].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-7 mt-2">
              <p class="name">{{statAllProduct[3].title}}</p>
            </div>
            <div class="col-sm-1 mt-2">
              <p class="name1">{{statAllProduct[3].Quantity}}</p>
            </div>

          </div>

          <!-- top5 -->
          <div class="row mb-3">
            <div class="col-sm-2 mt-2" style="text-align: center;">
              #5
            </div>

            <div class="col-sm-1 img-reponsive">
              <img src="{{statAllProduct[4].imageUrl}}" alt="" width="40px" height="40px">
            </div>
            <div class="col-sm-7 mt-2">
              <p class="name">{{statAllProduct[4].title}}</p>
            </div>
            <div class="col-sm-1 mt-2">
              <p class="name1">{{statAllProduct[4].Quantity}}</p>
            </div>

          </div>


        </div>
      </div>

    </div>
  </div>

  <div style="margin-top: 30px; margin-bottom: 20px" *ngIf="!messStatError">
    <table
      class="table table-bordered table-striped table-hover table-responsive-lg"
    >
      <thead style="background-color: rgb(148, 202, 219)">
        <tr>
          <th>No.</th>
          <th>Tên sách</th>
          <th>Tác giả</th>
          <th>Nhà xuất bản</th>
          <th>Số lượng bán được</th>
          <th>Tổng doanh thu</th>
          <th>Tổng lợi nhuận</th>
        </tr>
      </thead>
      <tbody >
        <tr *ngFor="let pro of statAllProduct | paginate: config; let i = index">
          <td>{{ i + 1 }}</td>
          <td class="text-info font-weight-bold">{{ pro.title }}</td>
          <td>{{ pro.Author.name }}</td>
          <td>
            {{ pro.Publisher.name }}
          </td>
          <td>{{ pro.Quantity }}</td>
          <td>{{ pro.Revenue }}</td>
          <td>{{ pro.Profit }}</td>

        </tr>
      </tbody>

    </table>
    <pagination-controls
      style="text-align: center"
      (pageChange)="pageChanged($event)" *ngIf="statAllProduct.length>10"
    ></pagination-controls>
  </div>

  </div>
